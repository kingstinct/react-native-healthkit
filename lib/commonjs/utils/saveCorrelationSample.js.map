{"version":3,"names":["_ensureMetadata","_interopRequireDefault","require","_nativeTypes","obj","__esModule","default","saveCorrelationSample","typeIdentifier","samples","options","start","Date","toISOString","end","Native","map","sample","startDate","endDate","rest","updatedSample","metadata","ensureMetadata","_default","exports"],"sources":["saveCorrelationSample.ts"],"sourcesContent":["import ensureMetadata from './ensureMetadata'\nimport Native from '../native-types'\n\nimport type { MetadataMapperForCorrelationIdentifier, HKCorrelationTypeIdentifier } from '../native-types'\nimport type { HKCategorySampleForSaving, HKQuantitySampleForSaving } from '../types'\n\nasync function saveCorrelationSample<\n  TIdentifier extends HKCorrelationTypeIdentifier,\n  TSamples extends readonly(\n    | HKCategorySampleForSaving\n    | HKQuantitySampleForSaving\n  )[]\n>(\n  typeIdentifier: TIdentifier,\n  samples: TSamples,\n  options?: {\n    readonly start?: Date;\n    readonly end?: Date;\n    readonly metadata?: MetadataMapperForCorrelationIdentifier<TIdentifier>;\n  },\n) {\n  const start = (options?.start || new Date()).toISOString()\n  const end = (options?.end || new Date()).toISOString()\n\n  return Native.saveCorrelationSample(\n    typeIdentifier,\n    samples.map((sample) => {\n      const { startDate, endDate, ...rest } = sample\n      const updatedSample = {\n        ...rest,\n        ...(startDate && { startDate: new Date(startDate).toISOString() }),\n        ...(endDate && { endDate: new Date(endDate).toISOString() }),\n      }\n\n      return { ...updatedSample, metadata: ensureMetadata(sample.metadata) }\n    }),\n    start,\n    end,\n    ensureMetadata(options?.metadata),\n  )\n}\n\nexport default saveCorrelationSample\n"],"mappings":";;;;;;AAAA,IAAAA,eAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAoC,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAKpC,eAAeG,qBAAqBA,CAOlCC,cAA2B,EAC3BC,OAAiB,EACjBC,OAIC,EACD;EACA,MAAMC,KAAK,GAAG,CAAC,CAAAD,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEC,KAAK,KAAI,IAAIC,IAAI,CAAC,CAAC,EAAEC,WAAW,CAAC,CAAC;EAC1D,MAAMC,GAAG,GAAG,CAAC,CAAAJ,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEI,GAAG,KAAI,IAAIF,IAAI,CAAC,CAAC,EAAEC,WAAW,CAAC,CAAC;EAEtD,OAAOE,oBAAM,CAACR,qBAAqB,CACjCC,cAAc,EACdC,OAAO,CAACO,GAAG,CAAEC,MAAM,IAAK;IACtB,MAAM;MAAEC,SAAS;MAAEC,OAAO;MAAE,GAAGC;IAAK,CAAC,GAAGH,MAAM;IAC9C,MAAMI,aAAa,GAAG;MACpB,GAAGD,IAAI;MACP,IAAIF,SAAS,IAAI;QAAEA,SAAS,EAAE,IAAIN,IAAI,CAACM,SAAS,CAAC,CAACL,WAAW,CAAC;MAAE,CAAC,CAAC;MAClE,IAAIM,OAAO,IAAI;QAAEA,OAAO,EAAE,IAAIP,IAAI,CAACO,OAAO,CAAC,CAACN,WAAW,CAAC;MAAE,CAAC;IAC7D,CAAC;IAED,OAAO;MAAE,GAAGQ,aAAa;MAAEC,QAAQ,EAAE,IAAAC,uBAAc,EAACN,MAAM,CAACK,QAAQ;IAAE,CAAC;EACxE,CAAC,CAAC,EACFX,KAAK,EACLG,GAAG,EACH,IAAAS,uBAAc,EAACb,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEY,QAAQ,CAClC,CAAC;AACH;AAAC,IAAAE,QAAA,GAEcjB,qBAAqB;AAAAkB,OAAA,CAAAnB,OAAA,GAAAkB,QAAA"}