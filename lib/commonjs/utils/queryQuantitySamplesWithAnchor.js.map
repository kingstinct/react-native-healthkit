{"version":3,"names":["_deserializeSample","_interopRequireDefault","require","_ensureUnit","_prepareOptions","_nativeTypes","obj","__esModule","default","queryQuantitySamplesWithAnchor","identifier","options","unit","ensureUnit","opts","prepareOptions","result","Native","from","to","limit","anchor","deletedSamples","newAnchor","samples","map","deserializeQuantitySample","_default","exports"],"sources":["queryQuantitySamplesWithAnchor.ts"],"sourcesContent":["import deserializeQuantitySample from './deserializeSample'\nimport ensureUnit from './ensureUnit'\nimport prepareOptions from './prepareOptions'\nimport Native from '../native-types'\n\nimport type { HKQuantityTypeIdentifier, UnitForIdentifier, DeletedQuantitySampleRaw } from '../native-types'\nimport type { GenericQueryOptions, HKQuantitySample } from '../types'\n\nexport type QueryQuantitySamplesWithAnchorResponse<T extends HKQuantityTypeIdentifier> = {\n  readonly samples: readonly HKQuantitySample<T>[],\n  readonly deletedSamples: readonly DeletedQuantitySampleRaw<T>[],\n  readonly newAnchor: string\n}\n\nexport type QueryQuantitySamplesWithAnchorFn = <\n  TIdentifier extends HKQuantityTypeIdentifier,\n  TUnit extends UnitForIdentifier<TIdentifier>\n>(\n  identifier: TIdentifier,\n  options: Omit<GenericQueryOptions, 'ascending'> & { readonly unit?: TUnit }\n) => Promise<QueryQuantitySamplesWithAnchorResponse<TIdentifier>>;\n\nconst queryQuantitySamplesWithAnchor: QueryQuantitySamplesWithAnchorFn = async (\n  identifier,\n  options,\n) => {\n  const unit = await ensureUnit(identifier, options.unit)\n  const opts = prepareOptions(options)\n\n  const result = await Native.queryQuantitySamplesWithAnchor(\n    identifier,\n    unit,\n    opts.from,\n    opts.to,\n    opts.limit,\n    opts.anchor,\n  )\n\n  return {\n    deletedSamples: result.deletedSamples,\n    newAnchor: result.newAnchor,\n    samples: result.samples.map(deserializeQuantitySample),\n  }\n}\n\nexport default queryQuantitySamplesWithAnchor\n"],"mappings":";;;;;;AAAA,IAAAA,kBAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,eAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,YAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAAoC,SAAAD,uBAAAK,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAmBpC,MAAMG,8BAAgE,GAAG,MAAAA,CACvEC,UAAU,EACVC,OAAO,KACJ;EACH,MAAMC,IAAI,GAAG,MAAM,IAAAC,mBAAU,EAACH,UAAU,EAAEC,OAAO,CAACC,IAAI,CAAC;EACvD,MAAME,IAAI,GAAG,IAAAC,uBAAc,EAACJ,OAAO,CAAC;EAEpC,MAAMK,MAAM,GAAG,MAAMC,oBAAM,CAACR,8BAA8B,CACxDC,UAAU,EACVE,IAAI,EACJE,IAAI,CAACI,IAAI,EACTJ,IAAI,CAACK,EAAE,EACPL,IAAI,CAACM,KAAK,EACVN,IAAI,CAACO,MACP,CAAC;EAED,OAAO;IACLC,cAAc,EAAEN,MAAM,CAACM,cAAc;IACrCC,SAAS,EAAEP,MAAM,CAACO,SAAS;IAC3BC,OAAO,EAAER,MAAM,CAACQ,OAAO,CAACC,GAAG,CAACC,0BAAyB;EACvD,CAAC;AACH,CAAC;AAAA,IAAAC,QAAA,GAEclB,8BAA8B;AAAAmB,OAAA,CAAApB,OAAA,GAAAmB,QAAA"}