{"version":3,"names":["_react","require","_useSubscribeToChanges","_interopRequireDefault","_queryStatisticsForQuantity","obj","__esModule","default","useStatisticsForQuantity","identifier","options","from","to","unit","result","setResult","useState","optionsRef","useRef","useEffect","current","update","useCallback","res","queryStatisticsForQuantity","useSubscribeToChanges","_default","exports"],"sources":["useStatisticsForQuantity.ts"],"sourcesContent":["import {\n  useState, useEffect, useCallback, useRef,\n} from 'react'\n\nimport useSubscribeToChanges from './useSubscribeToChanges'\nimport queryStatisticsForQuantity from '../utils/queryStatisticsForQuantity'\n\nimport type { HKQuantityTypeIdentifier, HKStatisticsOptions, UnitForIdentifier } from '../native-types'\nimport type { QueryStatisticsResponse } from '../types'\n\nfunction useStatisticsForQuantity<TIdentifier extends HKQuantityTypeIdentifier, TUnit extends UnitForIdentifier<TIdentifier> = UnitForIdentifier<TIdentifier>>(\n  identifier: TIdentifier,\n  options: readonly HKStatisticsOptions[],\n  from: Date,\n  to?: Date,\n  unit?: TUnit,\n) {\n  const [result, setResult] = useState<QueryStatisticsResponse<TIdentifier, TUnit> | null>(null)\n\n  const optionsRef = useRef(options)\n\n  useEffect(() => {\n    optionsRef.current = options\n  }, [options])\n\n  const update = useCallback(async () => {\n    const res = await queryStatisticsForQuantity(identifier, optionsRef.current, from, to, unit)\n    setResult(res)\n  }, [\n    identifier, from, to, unit,\n  ])\n\n  useEffect(() => {\n    void update()\n  }, [update])\n\n  useSubscribeToChanges(identifier, update)\n\n  return result\n}\n\nexport default useStatisticsForQuantity\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAIA,IAAAC,sBAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,2BAAA,GAAAD,sBAAA,CAAAF,OAAA;AAA4E,SAAAE,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAK5E,SAASG,wBAAwBA,CAC/BC,UAAuB,EACvBC,OAAuC,EACvCC,IAAU,EACVC,EAAS,EACTC,IAAY,EACZ;EACA,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAG,IAAAC,eAAQ,EAAqD,IAAI,CAAC;EAE9F,MAAMC,UAAU,GAAG,IAAAC,aAAM,EAACR,OAAO,CAAC;EAElC,IAAAS,gBAAS,EAAC,MAAM;IACdF,UAAU,CAACG,OAAO,GAAGV,OAAO;EAC9B,CAAC,EAAE,CAACA,OAAO,CAAC,CAAC;EAEb,MAAMW,MAAM,GAAG,IAAAC,kBAAW,EAAC,YAAY;IACrC,MAAMC,GAAG,GAAG,MAAM,IAAAC,mCAA0B,EAACf,UAAU,EAAEQ,UAAU,CAACG,OAAO,EAAET,IAAI,EAAEC,EAAE,EAAEC,IAAI,CAAC;IAC5FE,SAAS,CAACQ,GAAG,CAAC;EAChB,CAAC,EAAE,CACDd,UAAU,EAAEE,IAAI,EAAEC,EAAE,EAAEC,IAAI,CAC3B,CAAC;EAEF,IAAAM,gBAAS,EAAC,MAAM;IACd,KAAKE,MAAM,CAAC,CAAC;EACf,CAAC,EAAE,CAACA,MAAM,CAAC,CAAC;EAEZ,IAAAI,8BAAqB,EAAChB,UAAU,EAAEY,MAAM,CAAC;EAEzC,OAAOP,MAAM;AACf;AAAC,IAAAY,QAAA,GAEclB,wBAAwB;AAAAmB,OAAA,CAAApB,OAAA,GAAAmB,QAAA"}