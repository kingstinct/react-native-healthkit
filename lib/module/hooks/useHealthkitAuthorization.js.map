{"version":3,"names":["useCallback","useEffect","useRef","useState","getRequestStatusForAuthorization","requestAuthorization","useHealthkitAuthorization","read","write","status","setStatus","readMemo","writeMemo","current","refreshAuthStatus","auth","request"],"sources":["useHealthkitAuthorization.ts"],"sourcesContent":["import {\n  useCallback, useEffect, useRef, useState,\n} from 'react'\n\nimport getRequestStatusForAuthorization from '../utils/getRequestStatusForAuthorization'\nimport requestAuthorization from '../utils/requestAuthorization'\n\nimport type { HealthkitReadAuthorization, HealthkitWriteAuthorization, HKAuthorizationRequestStatus } from '../native-types'\n\nconst useHealthkitAuthorization = (read: readonly HealthkitReadAuthorization[], write?: readonly HealthkitWriteAuthorization[]) => {\n  const [status, setStatus] = useState<HKAuthorizationRequestStatus | null>(null)\n\n  const readMemo = useRef(read)\n  const writeMemo = useRef(write)\n\n  useEffect(() => {\n    readMemo.current = read\n    writeMemo.current = write\n  }, [read, write])\n\n  const refreshAuthStatus = useCallback(async () => {\n    const auth = await getRequestStatusForAuthorization(readMemo.current, writeMemo.current)\n\n    setStatus(auth)\n    return auth\n  }, [])\n\n  const request = useCallback(async () => {\n    await requestAuthorization(readMemo.current, writeMemo.current)\n    return refreshAuthStatus()\n  }, [refreshAuthStatus])\n\n  useEffect(() => {\n    void refreshAuthStatus()\n  }, [refreshAuthStatus])\n\n  return [status, request] as const\n}\n\nexport default useHealthkitAuthorization\n"],"mappings":"AAAA,SACEA,WAAW,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QACnC,OAAO;AAEd,OAAOC,gCAAgC,MAAM,2CAA2C;AACxF,OAAOC,oBAAoB,MAAM,+BAA+B;AAIhE,MAAMC,yBAAyB,GAAGA,CAACC,IAA2C,EAAEC,KAA8C,KAAK;EACjI,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGP,QAAQ,CAAsC,IAAI,CAAC;EAE/E,MAAMQ,QAAQ,GAAGT,MAAM,CAACK,IAAI,CAAC;EAC7B,MAAMK,SAAS,GAAGV,MAAM,CAACM,KAAK,CAAC;EAE/BP,SAAS,CAAC,MAAM;IACdU,QAAQ,CAACE,OAAO,GAAGN,IAAI;IACvBK,SAAS,CAACC,OAAO,GAAGL,KAAK;EAC3B,CAAC,EAAE,CAACD,IAAI,EAAEC,KAAK,CAAC,CAAC;EAEjB,MAAMM,iBAAiB,GAAGd,WAAW,CAAC,YAAY;IAChD,MAAMe,IAAI,GAAG,MAAMX,gCAAgC,CAACO,QAAQ,CAACE,OAAO,EAAED,SAAS,CAACC,OAAO,CAAC;IAExFH,SAAS,CAACK,IAAI,CAAC;IACf,OAAOA,IAAI;EACb,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,OAAO,GAAGhB,WAAW,CAAC,YAAY;IACtC,MAAMK,oBAAoB,CAACM,QAAQ,CAACE,OAAO,EAAED,SAAS,CAACC,OAAO,CAAC;IAC/D,OAAOC,iBAAiB,CAAC,CAAC;EAC5B,CAAC,EAAE,CAACA,iBAAiB,CAAC,CAAC;EAEvBb,SAAS,CAAC,MAAM;IACd,KAAKa,iBAAiB,CAAC,CAAC;EAC1B,CAAC,EAAE,CAACA,iBAAiB,CAAC,CAAC;EAEvB,OAAO,CAACL,MAAM,EAAEO,OAAO,CAAC;AAC1B,CAAC;AAED,eAAeV,yBAAyB"}