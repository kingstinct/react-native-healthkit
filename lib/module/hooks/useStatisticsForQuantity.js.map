{"version":3,"names":["useState","useEffect","useCallback","useRef","useSubscribeToChanges","queryStatisticsForQuantity","useStatisticsForQuantity","identifier","options","from","to","unit","result","setResult","optionsRef","current","update","res"],"sources":["useStatisticsForQuantity.ts"],"sourcesContent":["import {\n  useState, useEffect, useCallback, useRef,\n} from 'react'\n\nimport useSubscribeToChanges from './useSubscribeToChanges'\nimport queryStatisticsForQuantity from '../utils/queryStatisticsForQuantity'\n\nimport type { HKQuantityTypeIdentifier, HKStatisticsOptions, UnitForIdentifier } from '../native-types'\nimport type { QueryStatisticsResponse } from '../types'\n\nfunction useStatisticsForQuantity<TIdentifier extends HKQuantityTypeIdentifier, TUnit extends UnitForIdentifier<TIdentifier> = UnitForIdentifier<TIdentifier>>(\n  identifier: TIdentifier,\n  options: readonly HKStatisticsOptions[],\n  from: Date,\n  to?: Date,\n  unit?: TUnit,\n) {\n  const [result, setResult] = useState<QueryStatisticsResponse<TIdentifier, TUnit> | null>(null)\n\n  const optionsRef = useRef(options)\n\n  useEffect(() => {\n    optionsRef.current = options\n  }, [options])\n\n  const update = useCallback(async () => {\n    const res = await queryStatisticsForQuantity(identifier, optionsRef.current, from, to, unit)\n    setResult(res)\n  }, [\n    identifier, from, to, unit,\n  ])\n\n  useEffect(() => {\n    void update()\n  }, [update])\n\n  useSubscribeToChanges(identifier, update)\n\n  return result\n}\n\nexport default useStatisticsForQuantity\n"],"mappings":"AAAA,SACEA,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,MAAM,QACnC,OAAO;AAEd,OAAOC,qBAAqB,MAAM,yBAAyB;AAC3D,OAAOC,0BAA0B,MAAM,qCAAqC;AAK5E,SAASC,wBAAwBA,CAC/BC,UAAuB,EACvBC,OAAuC,EACvCC,IAAU,EACVC,EAAS,EACTC,IAAY,EACZ;EACA,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGb,QAAQ,CAAqD,IAAI,CAAC;EAE9F,MAAMc,UAAU,GAAGX,MAAM,CAACK,OAAO,CAAC;EAElCP,SAAS,CAAC,MAAM;IACda,UAAU,CAACC,OAAO,GAAGP,OAAO;EAC9B,CAAC,EAAE,CAACA,OAAO,CAAC,CAAC;EAEb,MAAMQ,MAAM,GAAGd,WAAW,CAAC,YAAY;IACrC,MAAMe,GAAG,GAAG,MAAMZ,0BAA0B,CAACE,UAAU,EAAEO,UAAU,CAACC,OAAO,EAAEN,IAAI,EAAEC,EAAE,EAAEC,IAAI,CAAC;IAC5FE,SAAS,CAACI,GAAG,CAAC;EAChB,CAAC,EAAE,CACDV,UAAU,EAAEE,IAAI,EAAEC,EAAE,EAAEC,IAAI,CAC3B,CAAC;EAEFV,SAAS,CAAC,MAAM;IACd,KAAKe,MAAM,CAAC,CAAC;EACf,CAAC,EAAE,CAACA,MAAM,CAAC,CAAC;EAEZZ,qBAAqB,CAACG,UAAU,EAAES,MAAM,CAAC;EAEzC,OAAOJ,MAAM;AACf;AAEA,eAAeN,wBAAwB"}