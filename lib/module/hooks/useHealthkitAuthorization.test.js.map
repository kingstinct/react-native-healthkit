{"version":3,"names":["renderHook","act","useHealthkitAuthorization","Native","HKAuthorizationRequestStatus","HKCategoryTypeIdentifier","waitForNextUpdate","describe","test","jest","spyOn","mockReturnValue","Promise","resolve","shouldRequest","result","abdominalCramps","expect","current","toBe","spy","unnecessary","retVal"],"sources":["useHealthkitAuthorization.test.ts"],"sourcesContent":["import { renderHook, act } from '@testing-library/react-native'\n\nimport useHealthkitAuthorization from './useHealthkitAuthorization'\nimport Native, { HKAuthorizationRequestStatus, HKCategoryTypeIdentifier } from '../native-types'\nimport waitForNextUpdate from '../test-utils'\n\ndescribe('useHealthkitAuthorization', () => {\n  test('should return shouldRequest', async () => {\n    jest.spyOn(Native, 'getRequestStatusForAuthorization').mockReturnValue(Promise.resolve(HKAuthorizationRequestStatus.shouldRequest))\n\n    const { result } = renderHook(() => useHealthkitAuthorization([HKCategoryTypeIdentifier.abdominalCramps]))\n\n    await waitForNextUpdate()\n\n    expect(result.current[0]).toBe(HKAuthorizationRequestStatus.shouldRequest)\n  })\n\n  test('should request permissions', async () => {\n    const spy = jest.spyOn(Native, 'getRequestStatusForAuthorization').mockReturnValue(Promise.resolve(HKAuthorizationRequestStatus.shouldRequest))\n    jest.spyOn(Native, 'requestAuthorization').mockReturnValue(Promise.resolve(true))\n\n    const { result } = renderHook(() => useHealthkitAuthorization([HKCategoryTypeIdentifier.abdominalCramps]))\n\n    await waitForNextUpdate()\n\n    spy.mockReturnValue(Promise.resolve(HKAuthorizationRequestStatus.unnecessary))\n\n    let retVal: HKAuthorizationRequestStatus | undefined\n    await act(async () => {\n      retVal = await result.current[1]()\n    })\n\n    expect(result.current[0]).toBe(HKAuthorizationRequestStatus.unnecessary)\n    expect(retVal).toBe(HKAuthorizationRequestStatus.unnecessary)\n  })\n\n  test('should return unnecessary', async () => {\n    jest.spyOn(Native, 'getRequestStatusForAuthorization').mockReturnValue(Promise.resolve(HKAuthorizationRequestStatus.unnecessary))\n\n    const { result } = renderHook(() => useHealthkitAuthorization([HKCategoryTypeIdentifier.abdominalCramps]))\n\n    await waitForNextUpdate()\n\n    expect(result.current[0]).toBe(HKAuthorizationRequestStatus.unnecessary)\n  })\n\n  test('should return null before initalizing', async () => {\n    const { result } = renderHook(() => useHealthkitAuthorization([HKCategoryTypeIdentifier.abdominalCramps]))\n\n    expect(result.current[0]).toBe(null)\n\n    await waitForNextUpdate()\n  })\n})\n"],"mappings":"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"}